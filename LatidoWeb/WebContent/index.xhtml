<?xml version='1.0' encoding='UTF-8' ?>
<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:b="http://bootsfaces.net/ui"
      xmlns:f="http://java.sun.com/jsf/core"
      xmlns:h="http://java.sun.com/jsf/html"
      xmlns:c="http://java.sun.com/jsp/jstl/core"
      xmlns:ui="http://xmlns.jcp.org/jsf/facelets">
    <h:head>
        <title>Sistema Latido</title>
        <link rel="stylesheet" type="text/css" href="/css/latido.css"/>
    </h:head>
    <h:body>
    		<b:form id="mainForm">
    			<b:navBar brand="#{index.systemName}">
	    			<b:navbarLinks >
	    				<c:forEach items="#{index.menu}" var="menu">
	    					<b:dropMenu value="#{menu.etiqueta}">
	    						<c:forEach items="#{menu.menuChildren}" var="sbmen">
	    							<b:dropMenu value="#{sbmen.etiqueta}">
	    								<c:forEach items="#{sbmen.menuChildren}" var="sb2men">
	    									<b:dropMenu value="#{sb2men.etiqueta}">
		    									<c:forEach items="#{sb2men.tareaChildren}" var="tar">
						    						<b:commandButton value="#{tar.nombre}" style="border : 0px;"></b:commandButton>
						    					</c:forEach>	
	    									</b:dropMenu>
	    								</c:forEach>
	    								<c:forEach items="#{sbmen.tareaChildren}" var="tar">
				    						<b:commandButton value="#{tar.nombre}" style="border : 0px;"></b:commandButton>
				    					</c:forEach>
	    							</b:dropMenu>
	    						</c:forEach>
		    					<c:forEach items="#{menu.tareaChildren}" var="tar">
		    						<b:commandButton value="#{tar.nombre}" style="border : 0px;"></b:commandButton>
		    					</c:forEach>
		    				</b:dropMenu>
	    				</c:forEach>
	    			</b:navbarLinks>
	    			<b:navbarLinks pull="right">
		    			<b:poll interval="60000" actionListener="#{index.listenerCurrDate}"/>
	    				<b:navLink value="#{index.currentDate}" id="currDate"></b:navLink>
	    				<b:navLink value="#{index.userName}"></b:navLink>
	    				<b:dropMenu icon-awesome="gear" value=" ">
	    					<b:commandButton value="Salir del sistema" icon-awesome="eject" style="border : 0px;"></b:commandButton>
	    					<b:commandButton value="Cerrar SesiÃ³n" icon-awesome="close" style="border : 0px;"></b:commandButton>
	    				</b:dropMenu>
	    			</b:navbarLinks>
	    		</b:navBar>
	    		
	    		<hr/>
	    		<b:container id="systemChoose" rendered="#{index.systemName != 'Latido' ? false : true}">
	    			<b:carousel id="systemsCarousel" style="width:100%" show-controls="false">
				  <c:forEach items="#{index.sistemas}" var="sis">
				  	<b:carouselItem style="width:400px;">
				  		<b:well>
					      <h3>
					      	<h:outputText value="#{sis.nombre}"></h:outputText>
					      </h3>
					      <h:outputText value="#{sis.descripcion}" ></h:outputText>
					      <br/>
					      <hr/>
					      <b:commandButton look="primary" 
					      				   value="Ir al sistema" 
					      				   icon-awesome="external-link"
					      				   ajax="true"
					      				   action-listener="#{index.selectSystem}">
					      	<f:attribute name="sistema" value="#{sis}"></f:attribute>
					      </b:commandButton>
					    </b:well>
				  	</b:carouselItem>
				  </c:forEach>
				</b:carousel>
	    		</b:container>
	    		<b:container id="systemResource" rendered="#{index.systemName != 'Latido' ? false : true}">
	    			<ui:include src=""></ui:include>
	    		</b:container>
    		</b:form>
    </h:body>
</html>
